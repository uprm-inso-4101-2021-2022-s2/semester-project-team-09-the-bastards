generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  uid        Int      @id @default(autoincrement())
  first_name String
  last_name  String
  // gender      Gender
  birth_date DateTime
  Login      Login?
  Patient    Patient?
  Medic       Medic?
}

// enum Gender {
//   MALE
//   FEMALE
//   NONBINARY
// }

model Login {
  id       Int    @id @default(autoincrement())
  user_id  Int    @unique
  email    String @unique
  password String
  user     User   @relation(fields: [user_id], references: [uid])
}

model Patient {
  pid          Int     @id @default(autoincrement())
  phone_number String
  user_id      Int     @unique
  user         User    @relation(fields: [user_id], references: [uid])
  review       Review?
}

model Medic {
  mid                Int                 @id @default(autoincrement())
  user_id      Int     @unique
  user         User    @relation(fields: [user_id], references: [uid])
  medic_availability MedicAvailability[]
  Review             Review?
}

model Schedule {
  sid         Int          @id @default(autoincrement())
  start_time  DateTime
  end_time    DateTime
  appointment Appointment?
}

model Appointment {
  aid         Int      @id @default(autoincrement())
  schedule_id Int      @unique
  schedule    Schedule @relation(fields: [schedule_id], references: [sid])
}

model Review {
  rid            Int     @id @default(autoincrement())
  title          String
  score          Int
  patient_id     Int     @unique
  medic_id       Int     @unique
  office_id      Int     @unique
  response_title String
  response_body  String
  Medic          Medic   @relation(fields: [medic_id], references: [mid])
  office         Office  @relation(fields: [office_id], references: [oid])
  patient        Patient @relation(fields: [patient_id], references: [pid])
}

model MedicAvailability {
  maid       Int      @id @default(autoincrement())
  start_time DateTime
  end_time   DateTime
  medic_id   Int
  medic      Medic    @relation(fields: [medic_id], references: [mid])
}

model Office {
  oid                 Int      @id @default(autoincrement())
  office_name         String
  office_address      String
  office_phone_number String
  office_open         DateTime
  ofice_close         DateTime
  review              Review?
}
